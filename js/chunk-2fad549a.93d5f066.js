(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fad549a"],{"0370":function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return e.loading?n("Loader"):n("div",{staticClass:"regions"},[n("div",{staticClass:"regions__header"},[n("h2",[e._v("Мой регион: "+e._s(e.userInfo.region+" "+e.userInfo.region_type_full))]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.regionName,expression:"regionName"}],on:{change:[function(i){var n=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var i="_value"in e?e._value:e.value;return i}));e.regionName=i.target.multiple?n:n[0]},e.fetchCitiesByRegion]}},[n("option",{attrs:{value:"default",disabled:"",selected:""}},[e._v("Изменить регион")]),e._l(e.regions,(function(i){return n("option",{key:i.id,domProps:{value:i}},[e._v(e._s(i.name))])}))],2)]),e.loadingCities?n("Loader"):n("div",{staticClass:"regions__items"},e._l(e.cities,(function(i,t){return n("router-link",{key:i+"_"+t,staticClass:"regions__item",attrs:{to:"/city/"+i}},[e._v(e._s(i))])})),1)],1)},a=[],o=(n("4160"),n("b0c0"),n("159b"),n("5530")),r=n("bc3a"),c=n.n(r),s=n("2f62"),l={data:function(){return{loadingCities:!0,loading:!0,regions:[],regionName:"default",cities:[]}},computed:Object(o["a"])({},Object(s["c"])(["userInfo"])),methods:{fetchCitiesByRegion:function(){var e=this;this.loadingCities=!0,c.a.get("\n        http://geohelper.info/api/v1/cities?apiKey=DsUzhCX9wDO44UcnTaj3nXUcTS9H2RqI&locale[lang]=ru&locale[fallbackLang]=en&order[by]=population&pagination[limit]=100&order[dir]=desc&filter[regionId]=".concat(this.regionName.id,"\n      ")).then((function(i){var n=[];i.data.result.forEach((function(e){n.push(e.name)})),e.cities=n,window.document.title="Погода в регионе ".concat(e.regionName.name),e.loadingCities=!1})).catch((function(i){e.$store.dispatch("openModal","Ошибка при загрузке городов региона."),e.loadingCities=!1}))}},mounted:function(){var e=this;c.a.get("http://geohelper.info/api/v1/regions?apiKey=DsUzhCX9wDO44UcnTaj3nXUcTS9H2RqI&locale[lang]=ru&pagination[limit]=100&filter[countryIso]=".concat(this.userInfo.country_iso_code)).then((function(i){i.data.result.forEach((function(i){e.regions.push({name:i.name,id:i.id})}))})).catch((function(i){e.$store.dispatch("openModal","Ошибка при загрузке регионов.")})),c.a.get("\n      http://geohelper.info/api/v1/cities?apiKey=DsUzhCX9wDO44UcnTaj3nXUcTS9H2RqI&locale[lang]=ru&locale[fallbackLang]=en&order[by]=population&pagination[limit]=100&order[dir]=desc&filter[regionCodes][iso]=".concat(this.userInfo.region_iso_code,"\n    ")).then((function(i){var n=[];i.data.result.forEach((function(e){n.push(e.name)})),e.cities=n,e.loading=!1,e.loadingCities=!1})).catch((function(i){e.$store.dispatch("openModal","Ошибка при получении городов региона по геолокации пользователя."),e.loading=!1,e.loadingCities=!1}))}},u=l,d=(n("aabb"),n("2877")),f=Object(d["a"])(u,t,a,!1,null,"204e3219",null);i["default"]=f.exports},aabb:function(e,i,n){"use strict";n("fab4")},fab4:function(e,i,n){}}]);
//# sourceMappingURL=chunk-2fad549a.93d5f066.js.map